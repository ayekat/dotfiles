#!/bin/bash

lcdadjust_start() {
	if [ -e ~/.config/argyll/$HOSTNAME.icc ]; then
		for ((i=1; i<=$(dynenv NUM_SCREENS); i++)); do
			dispwin -d $i $XDG_CONFIG_HOME/argyll/$HOSTNAME.icc
		done
	fi
}

lcdadjust_stop() {
	for ((i=1; i<=$(dynenv NUM_SCREENS); i++)); do
		true # TODO find out how to disable a display calibration
	done
}

lcdadjust_help() {
	printf "%s start|restart|stop\n" $(basename $0)
}

command="$1"
shift

case "$command" in
	start)
		lcdadjust_start;;

	stop)
		lcdadjust_stop;;

	restart)
		lcdadjust_stop
		lcdadjust_start;;

	*)
		lcdadjust_help
esac

