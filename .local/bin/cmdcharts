#!/usr/bin/env sh
# Prints the [n] most used commands based on the shell's history file where [n]
# is an optional argument (default: 10).

case $SHELL in
	/bin/bash) HISTFILE=/home/$USER/.bash_history ;;
	/bin/zsh)  HISTFILE=/home/$USER/.zhistory ;;
	*)         printf "unknown shell: %s\n" $SHELL >&2; exit 1 ;;
esac

[ $# -eq 0 ] && LINES=10 || LINES=$(($1))
echo '$'
awk '{print $1}' < "$HISTFILE" | sort | uniq -c | sort -rn | head -n $LINES | nl
echo '#'
grep '^sudo' "$HISTFILE" | awk '{print $2}' | sort | uniq -c | sort -rn | head -n $LINES | nl

